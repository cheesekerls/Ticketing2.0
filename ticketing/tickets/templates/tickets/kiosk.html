<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kiosk Services</title>
<style>
body { font-family: Arial; margin:0; padding:0; background:#fff; }
header { background:#123B5A; color:white; padding:15px; font-size:22px; text-align:center; }
h2 { text-align:center; color:#123B5A; margin:20px 0; }
.service-container { display:flex; flex-wrap:wrap; justify-content:center; gap:40px; padding:20px; }
.service-box { border:2px solid #ccc; border-radius:10px; width:230px; text-align:center; padding:20px; background:#fff; box-shadow:2px 2px 6px rgba(0,0,0,0.1); }
.service-box h3 { margin-bottom:20px; }
.btn { display:block; width:100%; margin:8px 0; padding:10px; border:none; border-radius:5px; font-weight:bold; color:white; cursor:pointer; }
.btn-regular { background:#123B5A; }
.btn-priority { background:#123B5A; }
.btn:hover { opacity:0.9; }
.message { position:fixed; top:40%; left:50%; transform:translate(-50%, -50%); background:#4CAF50; color:white; font-weight:bold; padding:20px 40px; border-radius:10px; box-shadow:0 4px 10px rgba(0,0,0,0.3); z-index:1000; display:none; text-align:center; font-size:20px; }
</style>
</head>
<body>

<header>
  {% if kiosk_name %}
    {{ kiosk_name }} Kiosk
  {% else %}
    Unknown Kiosk
  {% endif %}
</header>

{% if not services %}
  <div style="text-align:center; margin-top:50px; font-weight:bold; color:red;">
    {% if mac_address %}
      No services available for this MAC/department.
    {% else %}
      Kiosk MAC not recognized. Please register the machine in the system.
    {% endif %}
  </div>
{% endif %}

<div class="service-container">
{% for s in services %}
  <div class="service-box">
    <h3>{{ s.service_name }}</h3>

    <form method="post" action="{% url 'tickets:print_ticket_to_pos' service_id=s.id %}?mac={{ comp.mac_address }}">
      {% csrf_token %}
      <input type="hidden" name="ticket_type" value="Regular">
      <button type="submit" class="btn btn-regular">Regular</button>
    </form>

    <form method="post" action="{% url 'tickets:print_ticket_to_pos' service_id=s.id %}?mac={{ comp.mac_address }}">
      {% csrf_token %}
      <input type="hidden" name="ticket_type" value="Priority">
      <button type="submit" class="btn btn-priority">Priority</button>
    </form>
  </div>
{% empty %}
  <p style="text-align:center;">No services available for this MAC/department.</p>
{% endfor %}
</div>

<div id="message" class="message">{{ message }}</div>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const msg = document.getElementById('message');
  {% if message %}
    msg.style.display = 'block';
    setTimeout(()=>{ msg.style.display='none'; }, 2000);
  {% endif %}
});
</script>
</body>
</html>
